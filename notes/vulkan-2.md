# 第二章

## 概述

本章首先会简要介绍一下Vulkan并且概述一些相关问题。之后，我们会分析绘制一个简单三角形所涉及到的所有内容，并且描述后续章节涉及内容的一个全景图。之后，我们开始介绍Vulkan API的结构和一些通用的使用方法。

### Vulkan的起源

和之前OpenGL等旧式的图形API一样，Vulkan是基于不同平台GPU抽象设计的API接口。旧式的图形API最大的问题是抽象设计这些API的年代比较久远，那时的图形显卡大部分属于可配置的固定管线功能的显卡。开发者需要提供固定格式的顶点数据，显示只能依赖于GPU厂商提供的光照和绘制的配置选项。

显卡设备不断成熟，目前绝大部分显卡可以提供可编程的管线功能。这些新的功能要不断的去适配已经存在的旧式接口。这就导致了图形API接口并不是显卡设备最理想的一种抽象表现。显卡驱动需要增加许多猜测，将开发者的真正操作映射到现代显卡上去。这就是为什么有那么多的显卡驱动更新来改进游戏的性能。由于驱动的复杂性，应用端的开发者也时常要来处理不同厂商设备的不兼容性，譬如着色器中语法的兼容性。除了这些新的特性之外，在过去十来年中我们看到了移动设备上图形处理器如雨后春笋般的发展，这些移动设备GPU由于其功耗和尺寸的限制有很多不同的架构。一个比较典型的例子就是拼接渲染，这种技术通过提供更多的控制功能给应用程序从而提高了渲染的效率。另外一个旧式的API由于时代原因遗留下来的限制是旧式API不支持多线程渲染，这也造成了渲染程序在CPU侧的一个瓶颈。总结来说旧式API随着现代显卡的发展带来了两个限制：

- 旧式API针对老式可配置固定管线的硬件设计，并不是最新硬件功能的最佳抽象，驱动层需要提供额外的适配工作
- 旧式的API由于时代原因不支持多线程，对渲染程序带来了CPU测的瓶颈

Vulkan通过抽象现代CPU架构特点抽象设计接口解决了上述的问题。

- Vulkan 通过使用更多参数的API接口允许编程者直接定义清晰的应用操作从而降低图形驱动的负载
- Vulkan 支持多线程，应用可创建多线程并发提交图形渲染指令
- Vulkan 为了减少着色器的在不同平台上的兼容性定义了统一的着色器字节码格式
- Vulkan 适配了现代图形处理器的通用计算功能，设计了包含图形功能和计算功能的统一API接口

### 如何使用Vulkan来绘制一个简单三角形

下面我们全面的概述一下绘制一个三角形整体的步骤。本小节中介绍的所有概念都会在接下来的各个章节中详细阐述。本小节会旨在给读者展示一张后续章节的整体宏景图

#### 第一步 实例和物理设备选择

